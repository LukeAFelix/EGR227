/**
 * Add your own comments
 * Hello
 */

import java.util.*;
public class HtmlValidator {
    //IMPLEMENT YOUR CODE HERE.
    private Queue<HtmlTag> tagsQueue;

    public HtmlValidator() {
        tagsQueue = new LinkedList<HtmlTag>();
    }



    public void addTag(HtmlTag tag) {
        if ( tag == null ) {
            throw new IllegalArgumentException();
        }
        tagsQueue.add(tag);
    }

// return a copy of all the HTML tags in the queue with the same order

    public Queue<HtmlTag> getTags() {
        return copy(tagsQueue);
    }


    public void removeAll(String element) {
        if ( element == null ) {
            throw new IllegalArgumentException();
        }
        if ( !tagsQueue.isEmpty() ) {
            int size = tagsQueue.size();
            for ( int i = 0; i < size; i++ ) {
                HtmlTag t = tagsQueue.remove();
                if ( !t.getElement().equals(element) ) {
                    tagsQueue.add(t);
                }
            }
        }
    }

// print an indented text representation of the HTML tag in the queue

    public void validate() {
        Queue<HtmlTag>copyQ = copy(tagsQueue);
        Stack<HtmlTag> tagsStack = new Stack<HtmlTag>();
        int indent = 0;
        while ( !copyQ.isEmpty() ) {
            HtmlTag t = copyQ.remove();
            if ( !t.isOpenTag() ) {
                if ( !tagsStack.isEmpty() && t.matches(tagsStack.peek())) {
                    indent--;
                    printTag(indent,t);// print indentation and the tag
                    tagsStack.pop(); // pop the open tag out
                } else {
                    System.out.println("ERROR unexpected tag: " + t);
                }
            } else {
                printTag(indent,t);
                if ( !t.isSelfClosing() ) {
                    tagsStack.add(t);
                    indent++;
                }
            }
        }
    }

// return a copy of the Queue that is passed


// print the indentation

    private void printTag(int n, HtmlTag tag) {
        for ( int i = 0; i < n; i++ ) {
            System.out.print(" ");
        }
        System.out.println(tag);
    }
}
